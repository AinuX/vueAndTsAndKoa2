(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["singer-song-list"],{"1b84":function(e,t,n){"use strict";var a=n("8216"),r=n("be57");e.exports=a("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),r)},"64bf":function(e,t,n){var a=n("efe2");e.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},8216:function(e,t,n){"use strict";var a=n("1c8b"),r=n("d890"),i=n("e8d6"),s=n("1944"),o=n("a83a"),u=n("262e"),l=n("c4e4"),c=n("a719"),p=n("efe2"),f=n("f471"),d=n("27b5"),m=n("7063");e.exports=function(e,t,n){var g=-1!==e.indexOf("Map"),v=-1!==e.indexOf("Weak"),h=g?"set":"add",b=r[e],y=b&&b.prototype,w=b,k={},x=function(e){var t=y[e];s(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(v&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!c(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!c(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(i(e,"function"!=typeof b||!(v||y.forEach&&!p((function(){(new b).entries().next()})))))w=n.getConstructor(t,e,g,h),o.REQUIRED=!0;else if(i(e,!0)){var _=new w,I=_[h](v?{}:-0,1)!=_,j=p((function(){_.has(1)})),z=f((function(e){new b(e)})),O=!v&&p((function(){var e=new b,t=5;while(t--)e[h](t,t);return!e.has(-0)}));z||(w=t((function(t,n){l(t,w,e);var a=m(new b,t,w);return void 0!=n&&u(n,a[h],a,g),a})),w.prototype=y,y.constructor=w),(j||O)&&(x("delete"),x("has"),g&&x("get")),(O||I)&&x(h),v&&y.clear&&delete y.clear}return k[e]=w,a({global:!0,forced:w!=b},k),d(w,e),v||n.setStrong(w,e,g),w}},a83a:function(e,t,n){var a=n("d5a8"),r=n("a719"),i=n("faa8"),s=n("d910").f,o=n("7e8b"),u=n("64bf"),l=o("meta"),c=0,p=Object.isExtensible||function(){return!0},f=function(e){s(e,l,{value:{objectID:"O"+ ++c,weakData:{}}})},d=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,l)){if(!p(e))return"F";if(!t)return"E";f(e)}return e[l].objectID},m=function(e,t){if(!i(e,l)){if(!p(e))return!0;if(!t)return!1;f(e)}return e[l].weakData},g=function(e){return u&&v.REQUIRED&&p(e)&&!i(e,l)&&f(e),e},v=e.exports={REQUIRED:!1,fastKey:d,getWeakData:m,onFreeze:g};a[l]=!0},be57:function(e,t,n){"use strict";var a=n("d910").f,r=n("6d60"),i=n("99ab"),s=n("e349"),o=n("c4e4"),u=n("262e"),l=n("99ee"),c=n("403f"),p=n("1e2c"),f=n("a83a").fastKey,d=n("b702"),m=d.set,g=d.getterFor;e.exports={getConstructor:function(e,t,n,l){var c=e((function(e,a){o(e,c,t),m(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),p||(e.size=0),void 0!=a&&u(a,e[l],e,n)})),d=g(t),v=function(e,t,n){var a,r,i=d(e),s=h(e,t);return s?s.value=n:(i.last=s={index:r=f(t,!0),key:t,value:n,previous:a=i.last,next:void 0,removed:!1},i.first||(i.first=s),a&&(a.next=s),p?i.size++:e.size++,"F"!==r&&(i.index[r]=s)),e},h=function(e,t){var n,a=d(e),r=f(t);if("F"!==r)return a.index[r];for(n=a.first;n;n=n.next)if(n.key==t)return n};return i(c.prototype,{clear:function(){var e=this,t=d(e),n=t.index,a=t.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete n[a.index],a=a.next;t.first=t.last=void 0,p?t.size=0:e.size=0},delete:function(e){var t=this,n=d(t),a=h(t,e);if(a){var r=a.next,i=a.previous;delete n.index[a.index],a.removed=!0,i&&(i.next=r),r&&(r.previous=i),n.first==a&&(n.first=r),n.last==a&&(n.last=i),p?n.size--:t.size--}return!!a},forEach:function(e){var t,n=d(this),a=s(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:n.first){a(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!h(this,e)}}),i(c.prototype,n?{get:function(e){var t=h(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),p&&a(c.prototype,"size",{get:function(){return d(this).size}}),c},setStrong:function(e,t,n){var a=t+" Iterator",r=g(t),i=g(a);l(e,t,(function(e,t){m(this,{type:a,target:e,state:r(e),kind:t,last:void 0})}),(function(){var e=i(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),c(t)}}},d0d9:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:15}},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.musicInfo}},[n("el-form-item",{attrs:{label:"歌手名"}},[n("el-input",{attrs:{placeholder:"歌手名"},model:{value:e.musicInfo.singerName,callback:function(t){e.$set(e.musicInfo,"singerName",t)},expression:"musicInfo.singerName"}})],1),n("el-form-item",{attrs:{label:"歌曲名"}},[n("el-input",{attrs:{placeholder:"歌曲名"},model:{value:e.musicInfo.songName,callback:function(t){e.$set(e.musicInfo,"songName",t)},expression:"musicInfo.songName"}})],1),n("el-form-item",{attrs:{label:"歌曲类型"}},[n("el-select",{attrs:{placeholder:"歌曲类型"},model:{value:e.musicInfo.songType,callback:function(t){e.$set(e.musicInfo,"songType",t)},expression:"musicInfo.songType"}},[n("el-option",{attrs:{label:"民族",value:"0"}}),n("el-option",{attrs:{label:"流行",value:"1"}}),n("el-option",{attrs:{label:"摇滚",value:"2"}}),n("el-option",{attrs:{label:"轻音乐",value:"3"}})],1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.submitUpload}},[e._v("上传")])],1)],1),n("el-col",{attrs:{span:7}},[n("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",action:"/music/upload","http-request":e.uoload,"before-upload":e.beforeAvatarUpload,accept:".mp4, .m4a, .mp3, .flac, .wima",multiple:"","auto-upload":!1}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[e._v(" 上传歌曲文件 "),n("p"),e._v("将文件拖到此处，或 "),n("em",[e._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("请上传.mp4, .m4a, .mp3, .flac, .wima文件格式")])])],1),n("el-col",{attrs:{span:7}},[n("el-upload",{ref:"singerImg_upload",staticClass:"upload-demo",attrs:{drag:"",action:"/music/upload","http-request":e.singerImgUpload,"before-upload":e.beforeAvatarUpload,accept:".png, .jpg, .gif, .jpeg",multiple:"","auto-upload":!1}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[e._v(" 上传歌曲图片文件 "),n("p"),e._v("将文件拖到此处，或 "),n("em",[e._v("点击上传")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("请上传.png, .jpg, .gif, .jpeg文件格式")])])],1)],1),n("el-row",[n("el-table",{staticStyle:{width:"100%","margin-top":"3%"},attrs:{data:e.musicData,border:"","default-sort":{prop:"isSys",order:"descending"}}},[n("el-table-column",{attrs:{width:"120",label:"歌曲图片"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("button",{on:{click:function(t){return e.songLyric(a)}}},[n("el-avatar",{attrs:{shape:"square",size:80,fit:"fill",src:a.songImg}})],1)]}}])}),n("el-table-column",{attrs:{prop:"song_name",label:"歌曲名",width:"380"}}),n("el-table-column",{attrs:{prop:"singer_name",label:"歌手名",width:"180"}}),n("el-table-column",{attrs:{prop:"songT",label:"歌曲类型",width:"150"}}),n("el-table-column",{attrs:{prop:"file_size",label:"時長",width:"180"}}),n("el-table-column",{attrs:{label:"音頻"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.play?n("el-button",{attrs:{type:"danger",icon:"el-icon-video-pause",circle:""},on:{click:function(t){return e.musicPause_btn(a)}}}):n("el-button",{attrs:{type:"primary",icon:"el-icon-video-play",circle:""},on:{click:function(t){return e.musicPlay_btn(a,a.musicUrl,a.singer_name,a.song_name)}}})]}}])})],1)],1),n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[6,12,18,100],"page-size":6,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],i=(n("fe59"),n("1b84"),n("e18c"),n("96db"),n("08ba"),n("af86"),n("b449"),n("17d6")),s=n("4324"),o=n("1b6a"),u=n("a549"),l=n("7ae9"),c=n("0a8e"),p=n("4bb7"),f=n("b32d"),d=function(e){return Object(f["a"])({url:"/music/get",method:"post",data:e})},m=n("9bac"),g=n("f727"),v=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.apply(this,arguments),e.musicData=[],e.tableKey=0,e.currentDate=new Date,e.userLocal=localStorage.getItem("user"),e.currentPage=1,e.total=0,e.musicInfo={songName:"",singerName:"",songType:"民族"},e.file_list=[],e}return Object(o["a"])(n,[{key:"songLyric",value:function(e){this.$router.push({path:"/music/singer-song-lyric",query:{singerName:e.singer_name,songName:e.song_name}})}},{key:"submitUpload",value:function(){if(""!=this.musicInfo.songName&&0!=this.$refs.upload.uploadFiles.length)return this.$refs.upload.submit(),void this.$refs.singerImg_upload.submit();this.$message.error("请检查上传参数是否齐全!")}},{key:"photoEnter",value:function(){}},{key:"created",value:function(){this.init()}},{key:"musicPlay_btn",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n,a,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.musicData.forEach((function(e){e.play=!1})),t.play=!0,e.next=4,m["a"].MusicPage({url:n,singerName:a,songName:r,play:!0});case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,a,r){return e.apply(this,arguments)}return t}()},{key:"musicPause_btn",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.play=!1;case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"onRoutesChange",value:function(e){console.log(e),console.log("拿不到playasb的store，应该是缓存")}},{key:"getSongType",value:function(e){var t=new Map([["0","民族"],["1","流行"],["2","摇滚"],["3","轻音乐"]]);return t.get(e)?t.get(e):"民族"}},{key:"init",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.musicInfo.singerName=this.$route.query.singerName+"",e.next=3,d({singerName:this.musicInfo.singerName,pageNum:this.currentPage});case 3:return t=e.sent,n=t.data,n.data.forEach((function(e){e.musicUrl=g["a"]+e.file_key,e.songImg=g["a"]+e.songFileKey,e.songT=a.getSongType(e.song_type),e.play=!1})),this.total=n.total,this.musicData=n.data,e.next=10,m["a"].AudiosPage(this.musicData);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"uoload",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.file_list.push(t);case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"singerImgUpload",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.file_list.push(t),console.log(this.file_list),e.abrupt("return");case 10:this.$message({message:"上传成功",type:"success"}),this.init(),e.next=15;break;case 14:this.$message({message:"请检查歌曲和歌曲图片是否有上传",type:"success"});case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleSizeChange",value:function(e){console.log("每页 ".concat(e," 条"))}},{key:"handleCurrentChange",value:function(e){console.log("当前页: ".concat(e)),this.currentPage=e,this.init()}},{key:"beforeAvatarUpload",value:function(e){}},{key:"musicpa",get:function(){return m["a"].playasb}}]),n}(p["c"]);Object(c["a"])([Object(p["d"])("musicpa")],v.prototype,"onRoutesChange",null),v=Object(c["a"])([Object(p["a"])({name:"singerSongList"})],v);var h=v,b=h,y=n("e90a"),w=Object(y["a"])(b,a,r,!1,null,null,null);t["default"]=w.exports},f727:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a="http://dignity.zhengzemin.cn/"}}]);