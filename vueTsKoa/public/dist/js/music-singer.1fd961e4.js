(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["music-singer"],{"592d":function(e,t,a){},9778:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.singerInfo}},[a("el-form-item",{attrs:{label:"歌手名"}},[a("el-input",{attrs:{placeholder:"歌手名"},model:{value:e.singerInfo.singerName,callback:function(t){e.$set(e.singerInfo,"singerName",t)},expression:"singerInfo.singerName"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("上传")])],1)],1),a("el-row",{attrs:{gutter:15}},[a("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:"/certificateAuthentication/upload","http-request":e.uoload,accept:".png, .jpg, .gif, .jpeg","show-file-list":!1,"auto-upload":!1,"on-change":e.changeSingerImg,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-row",e._l(e.singleList,(function(t,n){return a("el-col",{key:n,attrs:{span:6,offset:n>0?2:0}},[a("el-card",{attrs:{"body-style":{padding:"0px"}}},[a("el-avatar",{attrs:{shape:"square",size:150,fit:"fill",src:t.musicUrl}}),a("div",{staticStyle:{padding:"14px"}},[a("span",[e._v(e._s(t.singer_name))]),a("div",{staticClass:"bottom clearfix"},[a("time",{staticClass:"time"},[e._v(e._s(t.upload_time))]),a("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(a){return e.photoEnter(t.singer_name)}}},[e._v("进入歌单")])],1)])],1)],1)})),1)],1)},r=[],i=(a("fe59"),a("e18c"),a("96db"),a("08ba"),a("af86"),a("f1a9"),a("b449"),a("17d6")),s=a("4324"),o=a("1b6a"),u=a("a549"),c=a("7ae9"),l=a("0a8e"),p=a("4bb7"),g=a("f727"),f=a("b32d"),m=function(e){return Object(f["a"])({url:"/music/singer/get",method:"post",data:e})},d=function(e){return Object(f["a"])({url:"/music/singer/upload",method:"post",data:e})},h=function(e){Object(u["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.tableKey=0,e.currentDate=new Date,e.singleList=[],e.imageUrl="",e.singerInfo={singerName:""},e}return Object(o["a"])(a,[{key:"created",value:function(){this.init()}},{key:"photoEnter",value:function(e){this.$router.push({path:"/music/singer-song-list",query:{singerName:e}})}},{key:"beforeAvatarUpload",value:function(e){console.log(111);var t=e.size/1024/1024<20;return"image/jpeg"!==e.type&&"image/jpg"!==e.type&&"image/png"!==e.type&&"image/gif"!==e.type?(this.$message.error("只能上传图片格式文件!"),!1):t?void 0:(this.$message.error("上传头像图片大小不能超过 20MB!"),!1)}},{key:"onSubmit",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==this.singerInfo.singerName||0==this.$refs.upload.uploadFiles.length){e.next=3;break}return this.$refs.upload.submit(),e.abrupt("return");case 3:this.$message.error("请检查上传参数是否齐全!");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"init",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:t=e.sent,a=t.data,a.items.forEach((function(e){e.musicUrl=g["a"]+e.file_key})),this.singleList=a.items;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"handleAvatarSuccess",value:function(e,t){console.log(t),this.imageUrl=URL.createObjectURL(t.raw)}},{key:"changeSingerImg",value:function(e,t){this.imageUrl=URL.createObjectURL(e.raw),this.$message("歌手图片已选中")}},{key:"uoload",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new FormData,a.append("singerInfo",JSON.stringify(this.singerInfo)),a.append("file",t.file),e.next=5,d(a);case 5:this.$message({message:"上传成功",type:"success"}),this.init();case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),a}(p["c"]);h=Object(l["a"])([Object(p["a"])({name:"musicSinger"})],h);var v=h,b=v,y=(a("981a"),a("e90a")),w=Object(y["a"])(b,n,r,!1,null,null,null);t["default"]=w.exports},"981a":function(e,t,a){"use strict";var n=a("592d"),r=a.n(n);r.a},f727:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n="http://dignity.zhengzemin.cn/"}}]);